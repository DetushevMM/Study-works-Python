# Угадайка чисел

# Описание проекта: программа генерирует случайное число в диапазоне от 1 до 100 и просит пользователя угадать это число. 
# Если догадка пользователя больше случайного числа, то программа должна вывести сообщение 'Слишком много, попробуйте еще раз'. 
# Если догадка меньше случайного числа, то программа должна вывести сообщение 'Слишком мало, попробуйте еще раз'. 
# Если пользователь угадывает число, то программа должна поздравить его и вывести сообщение 'Вы угадали, поздравляем!'.

# Составляющие проекта:

# - Целые числа (тип int);
# - Переменные;
# - Ввод / вывод данных (функции input() и print());
# - Условный оператор (if/elif/else);
# - Цикл while;
# - Бесконечный цикл;
# - Операторы break, continue;
# - Работа с модулем random для генерации случайных чисел.

from random import randint, choice

# Фразы для разных ситуаций
phrases_too_much = [
    'Слишком много! Попробуй меньше.',
    'Многовато. Бери пониже.',
    'Это перебор. Меньше нужно.',
    'Ого, перебор! Уменьши число.',
]

phrases_too_little = [
    'Слишком мало! Попробуй побольше.',
    'Недостаточно. Надо больше.',
    'Это слишком мало. Увеличь число.',
    'Маловато. Подними планку.',
]

phrases_almost = [
    'Почти попал!',
    'Горячо, но не в точку.',
    'Ты близок!',
    'Уже рядом, продолжай!',
]

phrases_guessed = [
    'Поздравляю! Ты угадал число!',
    'Отлично! Правильный ответ!',
    'Ты справился! Молодец!',
]

phrases_too_soon = [
    'Да ты экстрасенс! С первой попытки!',
    'Фантастика! Сразу в яблочко!',
    'Ты точно не подглядывал?',
    'Вот это интуиция!',
]


# Основной алгоритм игры
def guessing_game(x, y):
    if x > y:
        x, y = y, x
    number = randint(x, y)
    print(f'\nЯ загадал число от {x} до {y}. Попробуй угадать!')

    attempts = 0
    while True:
        try:
            guess = int(input('Твой вариант: '))
        except ValueError:
            print('Пожалуйста, введи число, а не текст.')
            continue

        attempts += 1

        if guess == number:
            if attempts == 1:
                print(choice(phrases_too_soon))
            elif 1 < attempts <= 5:
                print(choice(phrases_guessed), 'И это всего за несколько попыток!')
            else:
                print(choice(phrases_guessed), f'Ты справился за {attempts} попыток.')
            again = input('\nХочешь сыграть ещё раз? (да/нет): ').lower()
            if again in ['да', 'lf', 'yes', 'y']:
                start()
            else:
                print('Спасибо за игру! Возвращайся, когда захочешь.')
                break
        elif guess > number:
            if abs(guess - number) < 5:
                print(choice(phrases_too_much), choice(phrases_almost), sep='\n')
            else:
                print(choice(phrases_too_much))
        else:
            if abs(guess - number) < 5:
                print(choice(phrases_too_little), choice(phrases_almost), sep='\n')
            else:
                print(choice(phrases_too_little))


# Правила игры
def game_rules():
    print('\nПравила игры:')
    print('1. Я загадаю число в диапазоне, который ты задашь.')
    print('2. Твоя задача — угадать его, вводя числа.')
    print('3. Я подскажу, больше или меньше твоё число загаданного.')
    input('\nЕсли всё понятно — нажми Enter, чтобы продолжить...')


# Проверка корректности ввода чисел
def get_valid_number(prompt):
    while True:
        value = input(prompt)
        if value.isdigit():
            return int(value)
        else:
            print('Ошибка: пожалуйста, введи целое число.')


# Запуск игры
def start():
    print('\nЗадай диапазон, в котором я загадаю число:')
    x = get_valid_number('Введите первую границу диапазона: ')
    y = get_valid_number('Введите вторую границу диапазона: ')
    if x == y:
        print('Диапазон не может быть с одинаковыми границами. Попробуй снова.')
        start()
    else:
        guessing_game(x, y)


# Приглашение в игру
def main():
    answer = input('Привет! Хочешь сыграть в игру "Угадай число"? (да/нет): ').lower()
    if answer in ['да', 'lf', 'yes', 'y']:
        game_rules()
        start()
    else:
        retry = input('Это займёт всего пару минут. Всё-таки хочешь попробовать? (да/нет): ').lower()
        if retry in ['да', 'lf', 'yes', 'y']:
            game_rules()
            start()
        else:
            print('Хорошо. Приходи поиграть, когда будет настроение!')

# Запуск
if __name__ == '__main__':
    main()